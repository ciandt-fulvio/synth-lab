#!/bin/bash
#
# Git pre-push hook: runs comprehensive tests before pushing
# All tests must pass before pushing to remote (typically before PR)
#

set -e

echo "Running comprehensive tests before push..."
echo ""

# Run full test suite
if ! make test-full; then
    echo ""
    echo "❌ Pre-push tests failed!"
    echo "   Fix all failing tests before pushing."
    echo ""
    echo "   To bypass this check (not recommended):"
    echo "   git push --no-verify"
    echo ""
    exit 1
fi

echo ""
echo "✅ All tests passed! Safe to push."
echo ""
