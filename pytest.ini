[pytest]
pythonpath = src
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*
asyncio_mode = auto
asyncio_default_fixture_loop_scope = function

# Filter warnings
filterwarnings =
    # Ignore scipy correlation warnings with constant test data
    ignore::scipy.stats._warnings_errors.ConstantInputWarning
    # Ignore SQLAlchemy 2.0 deprecation warnings
    ignore::sqlalchemy.exc.SADeprecationWarning

# Register custom markers to avoid warnings
markers =
    unit: Unit tests (fast, no external dependencies)
    integration: Integration tests (may require database or external services)
    contract: Contract tests (API contract validation)
    smoke: Smoke tests (very fast health checks, <5s total)
    schema: Schema validation tests (DB schema vs SQLAlchemy models)
    e2e: End-to-end tests (browser-based, slow)
    slow: Slow tests (excluded from fast test suite)
    requires_postgres: Tests that require PostgreSQL (auto-setup enabled)
